!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("infestines"),require("react"),require("kefir")):"function"==typeof define&&define.amd?define(["exports","infestines","react","kefir"],n):n(r.karet={},r.I,r.React,r.Kefir)}(this,function(r,n,e,t){"use strict";function i(r){var n=r._currentEvent;if(n)return n.value}function a(r){for(var e=r,t=0,f=r.length;t<f;++t){var o=r[t],u=k(o)?i(o):n.isArray(o)?a(o):o;o!==u&&(e===r&&(e=r.slice(0)),e[t]=u)}return e}function f(r){var n=null;for(var e in r){var t=r[e];if(k(t)){if(!n)for(var a in n={},r){if(a===e)break;n[a]=r[a]}n[e]=i(t)}else n&&(n[e]=t)}return n||r}function o(r,e,t,i){for(var a=e.length;r<a;++r){var f=e[r];k(f)?i(t,f):n.isArray(f)&&o(0,f,t,i)}}function u(r,e,t){for(var i in r){var a=r[i];if(k(a))t(e,a);else if(A===i)n.isArray(a)&&o(0,a,e,t);else if(m===i||g===i)for(var f in a){var u=a[f];k(u)&&t(e,u)}}}function l(r,n){n.offAny(r)}function s(r,n){n.onAny(r)}function c(r,n){var e=n.args,t=r.h;t||(t=r.h=function(n){var e=n.type;if(e===y)r.forceUpdate();else if(e===d)throw n.value}),u(e[1],t,s),o(2,e,t,s)}function v(r,n){var e=n.args,t=r.h;t&&(o(2,e,t,l),u(e[1],t,l))}function p(r,e){for(var t=e.length;r<t;++r){var i=e[r];if(k(i)||n.isArray(i)&&p(0,i))return!0}return!1}function h(r){var t=r[1];if(function(r){for(var e in r){var t=r[e];if(k(t))return!0;if(A===e){if(n.isArray(t)&&p(0,t))return!0}else if(m===e||g===e)for(var i in t)if(k(t[i]))return!0}return!1}(t)||p(2,r)){var i={args:r};if(t){var a=t.key;null!=a&&(i.key=a)}return e.createElement(U,i)}return e.createElement.apply(null,r)}var y="value",d="error",m="style",g="dangerouslySetInnerHTML",A="children",k=function(r){return r instanceof t.Property},E="undefined"==typeof window&&{h:null,forceUpdate:function(){}},U=n.inherit(function(r){e.Component.call(this,r),this.h=null,E&&(this.state=n.object0)},e.Component,{componentDidMount:function(){c(this,this.props)},componentDidUpdate:function(r){var e=this.props;n.acyclicEqualsU(e,r)||(v(this,r),c(this,e))},componentWillUnmount:function(){v(this,this.props)},render:function(){if(this.h||E){var r=this.props.args,t=r.length,o=Array(t);o[0]=r[0],o[1]=function(r){var e=null;for(var t in r){var o=r[t],u=k(o)?i(o):A===t?n.isArray(o)?a(o):o:m===t||g===t?f(o):o;if(o!==u){if(!e)for(var l in e={},r){if(l===t)break;e[l]=r[l]}e[t]=u}else e&&(e[t]=u)}return e||r}(r[1]);for(var u=2;u<t;++u){var l=r[u];o[u]=k(l)?i(l):n.isArray(l)?a(l):l}return e.createElement.apply(null,o)}return null}},E&&{getDerivedStateFromProps:function(r){return c(E,r),v(E,r),null}});r.Fragment=e.Fragment,r.createElement=function(r,t,i){var a=t&&t["karet-lift"];if(a||n.isString(r)||e.Fragment===r){var f=arguments.length,o=Array(f);o[0]=r,o[1]=a?n.dissocPartialU("karet-lift",t):t;for(var u=2;u<f;++u)o[u]=arguments[u];return h(o)}return e.createElement.apply(null,arguments)},r.fromClass=function(r){return e.forwardRef(function(e,t){return h([r,null==t?e:n.assocPartialU("ref",t,e)])})},Object.defineProperty(r,"__esModule",{value:!0})});
