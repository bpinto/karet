!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("infestines"),require("partial.lenses"),require("react"),require("kefir")):"function"==typeof define&&define.amd?define(["exports","infestines","partial.lenses","react","kefir"],n):n(e.karet={},e.I,e.L,e.React,e.Kefir)}(this,function(e,a,o,u,n){"use strict";function t(e){var n=e._currentEvent;if(n)return n.value}function r(t,e){var n=e.args,r=t.h;r||(r=t.h=function(e){var n=e.type;if("value"===n)t.forceUpdate();else if("error"===n)throw e.value}),o.forEach(function(e){return e.onAny(r)},m,n)}function i(e,n){var t=e.h;o.forEach(function(e){return e.offAny(t)},m,n.args)}function f(e,n,t){for(;e<0;++e)n.offAny(t.h);for(;0<e;--e)n.onAny(t.h)}var c="karet-lift",l=function(e){return e instanceof n.Property},s=o.when(l),h=o.toFunction([o.flatten,s]),p=o.ifElse(l,o.identity,[o.values,s]),d=o.branchOr(s,{children:h,style:p,dangerouslySetInnerHTML:p}),m=o.toFunction([o.elems,o.choose(function(e,n){return 1<n?h:1===n?d:s})]),y="undefined"==typeof window?{h:null,forceUpdate:function(){}}:null,g=a.inherit(function(e){u.Component.call(this,e),(this.h=y)&&(this.state=a.object0)},u.Component,{componentDidMount:function(){r(this,this.props)},componentDidUpdate:function(e){var n=new Map;n.h=this.h,o.forEach(function(e){return n.set(e,(n.get(e)||0)-1)},m,e.args),o.forEach(function(e){return n.set(e,(n.get(e)||0)+1)},m,this.props.args),n.forEach(f)},componentWillUnmount:function(){i(this,this.props)},render:function(){if(this.h){var e=o.modify(m,t,this.props.args);return e[0]===u.Fragment&&e.length<3?null:u.createElement.apply(null,e)}return null}},y&&{getDerivedStateFromProps:function(e){return r(y,e),i(y,e),null}}),v=function(e){return o.get(m,e)?u.createElement(g,{args:e,key:e[1].key}):u.createElement.apply(null,e)};e.Children=u.Children,e.Fragment=u.Fragment,e.createContext=u.createContext,e.forwardRef=u.forwardRef,e.createElement=function(e,n,t){var r=(n=n||a.object0)[c];if(r||a.isString(e)||u.Fragment===e||l(e)){var o=arguments.length,i=Array(o);i[0]=e,i[1]=r?a.dissocPartialU(c,n):n;for(var f=2;f<o;++f)i[f]=arguments[f];return v(i)}return u.createElement.apply(null,arguments)},e.fromClass=function(t){return u.forwardRef(function(e,n){return v([t,null==n?e:a.assocPartialU("ref",n,e)])})},Object.defineProperty(e,"__esModule",{value:!0})});
