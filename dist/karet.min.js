!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("infestines"),require("partial.lenses"),require("react"),require("kefir")):"function"==typeof define&&define.amd?define(["exports","infestines","partial.lenses","react","kefir"],n):n(e.karet={},e.I,e.L,e.React,e.Kefir)}(this,function(e,f,u,c,n){"use strict";function t(e){var n=e._currentEvent;if(n)return n.value}function r(t,e){var n=e.args,r=t.h;r||(r=t.h=function(e){var n=e.type;if("value"===n)t.forceUpdate();else if("error"===n)throw e.value}),u.forEach(function(e){return e.onAny(r)},m,n)}function o(e,n){var t=e.h;u.forEach(function(e){return e.offAny(t)},m,n.args)}function i(e,n,t){for(;e<0;++e)n.offAny(t.h);for(;0<e;--e)n.onAny(t.h)}var l="karet-lift",s=function(e){return e instanceof n.Property},a=u.when(s),p=u.toFunction([u.flatten,a]),h=u.ifElse(s,u.identity,[u.values,a]),d=u.branchOr(a,{children:p,style:h,dangerouslySetInnerHTML:h}),m=u.toFunction([u.elems,u.choose(function(e,n){return 1<n?p:1===n?d:a})]),y="undefined"==typeof window?{h:null,forceUpdate:function(){}}:null,g=f.inherit(function(e){c.Component.call(this,e),(this.h=y)&&(this.state=f.object0)},c.Component,{componentDidMount:function(){r(this,this.props)},componentDidUpdate:function(e){var n=new Map;n.h=this.h,u.forEach(function(e){return n.set(e,(n.get(e)||0)-1)},m,e.args),u.forEach(function(e){return n.set(e,(n.get(e)||0)+1)},m,this.props.args),n.forEach(i)},componentWillUnmount:function(){o(this,this.props)},render:function(){if(this.h){var e=u.modify(m,t,this.props.args);return e[0]===c.Fragment&&e.length<3?null:c.createElement.apply(null,e)}return null}},y&&{getDerivedStateFromProps:function(e){return r(y,e),o(y,e),null}});e.Children=c.Children,e.Fragment=c.Fragment,e.createContext=c.createContext,e.forwardRef=c.forwardRef,e.createElement=function(e,n,t){var r=(n=n||f.object0)[l];if(r||f.isString(e)||c.Fragment===e||s(e)){var o=arguments.length,i=Array(o);i[0]=e,i[1]=r?f.dissocPartialU(l,n):n;for(var a=2;a<o;++a)i[a]=arguments[a];return u.get(m,i)?c.createElement(g,{args:i,key:n.key}):c.createElement.apply(null,i)}return c.createElement.apply(null,arguments)},e.fromClass=function(r){return c.forwardRef(function(e,n){var t=[r,null==n?e:f.assocPartialU("ref",n,e)];return u.get(m,t)?c.createElement(g,{args:t}):c.createElement.apply(null,t)})},Object.defineProperty(e,"__esModule",{value:!0})});
