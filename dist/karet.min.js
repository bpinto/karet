!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("infestines"),require("partial.lenses"),require("react"),require("kefir")):"function"==typeof define&&define.amd?define(["exports","infestines","partial.lenses","react","kefir"],n):n(e.karet={},e.I,e.L,e.React,e.Kefir)}(this,function(e,n,t,r,o){"use strict";function i(e){var n=e._currentEvent;if(n)return n.value}function f(e,n){var r=n.args,o=e.h;o||(o=e.h=function(n){var t=n.type;if("value"===t)e.forceUpdate();else if("error"===t)throw n.value}),t.forEach(function(e){return e.onAny(o)},d,r)}function a(e,n){var r=e.h;t.forEach(function(e){return e.offAny(r)},d,n.args)}function u(e,n,t){for(;e<0;++e)n.offAny(t.h);for(;0<e;--e)n.onAny(t.h)}var c=function(e){return e instanceof o.Property},l=t.when(c),s=t.toFunction([t.flatten,l]),h=t.ifElse(c,t.identity,[t.values,l]),p=t.branchOr(l,{children:s,style:h,dangerouslySetInnerHTML:h}),d=t.toFunction([t.elems,t.choose(function(e,n){return 1<n?s:1===n?p:l})]),m="undefined"==typeof window?{h:null,forceUpdate:function(){}}:null,y=n.inherit(function(e){r.Component.call(this,e),(this.h=m)&&(this.state=n.object0)},r.Component,{componentDidMount:function(){f(this,this.props)},componentDidUpdate:function(e){var n=new Map;n.h=this.h,t.forEach(function(e){return n.set(e,(n.get(e)||0)-1)},d,e.args),t.forEach(function(e){return n.set(e,(n.get(e)||0)+1)},d,this.props.args),n.forEach(u)},componentWillUnmount:function(){a(this,this.props)},render:function(){if(this.h){var e=t.modify(d,i,this.props.args);return e[0]===r.Fragment&&e.length<3?null:r.createElement.apply(null,e)}return null}},m&&{getDerivedStateFromProps:function(e){return f(m,e),a(m,e),null}}),g=function(e){return t.select(d,e)?r.createElement(y,{args:e,key:e[1].key}):r.createElement.apply(null,e)};e.Children=r.Children,e.Fragment=r.Fragment,e.createContext=r.createContext,e.forwardRef=r.forwardRef,e.createElement=function(e,t,o){var i=(t=t||n.object0)["karet-lift"];if(i||n.isString(e)||r.Fragment===e||c(e)){var f=arguments.length,a=Array(f);a[0]=e,a[1]=i?n.dissocPartialU("karet-lift",t):t;for(var u=2;u<f;++u)a[u]=arguments[u];return g(a)}return r.createElement.apply(null,arguments)},e.fromClass=function(e){return r.forwardRef(function(t,r){return g([e,null==r?t:n.assocPartialU("ref",r,t)])})},Object.defineProperty(e,"__esModule",{value:!0})});
